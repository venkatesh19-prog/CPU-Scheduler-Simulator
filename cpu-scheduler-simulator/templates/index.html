<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Intelligent CPU Scheduler Simulator</title>
    
    <!-- Link to the CSS Stylesheet -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app-container">
        
        <!-- HEADER -->
        <header>
            <div class="header-content">
                <h1>CPU Scheduler <span class="badge">Sim</span></h1>
                <div class="header-controls">
                    <button id="theme-toggle" aria-label="Toggle High Contrast Mode">High Contrast</button>
                    <button id="btn-export" class="btn btn-outline">Export JSON</button>
                    <label for="file-import" class="btn btn-outline">Import JSON</label>
                    <input type="file" id="file-import" accept=".json" style="display:none">
                </div>
            </div>
        </header>

        <!-- MAIN GRID -->
        <main>
            
            <!-- LEFT PANEL: CONFIGURATION -->
            <section class="panel control-panel">
                <h2>Configuration</h2>
                
                <form id="config-form" onsubmit="return false;">
                    <div class="form-group">
                        <label for="algo-select">Algorithm</label>
                        <select id="algo-select" class="form-control">
                            <option value="FCFS">First Come First Serve (FCFS)</option>
                            <option value="SJF">Shortest Job First (Non-Preemptive)</option>
                            <option value="PRIORITY">Priority (Non-Preemptive)</option>
                            <option value="RR">Round Robin</option>
                        </select>
                    </div>

                    <div class="form-row">
                        <div class="form-group" id="group-quantum" style="display:none;">
                            <label for="quantum">Quantum (ms)</label>
                            <input type="number" id="quantum" class="form-control" value="2" min="1">
                        </div>
                        <div class="form-group">
                            <label for="context-switch">Context Switch (ms)</label>
                            <input type="number" id="context-switch" class="form-control" value="0" min="0">
                        </div>
                    </div>

                    <div class="processes-header">
                        <h3>Processes</h3>
                        <button id="btn-add-process" class="btn btn-sm btn-primary" aria-label="Add Process">+</button>
                    </div>

                    <div id="process-list" class="process-list custom-scrollbar">
                        <!-- Dynamic Process Items will appear here -->
                    </div>
                </form>

                <div class="action-buttons">
                    <button id="btn-run" class="btn btn-primary btn-block">Simulate</button>
                    <button id="btn-reset" class="btn btn-danger btn-block">Reset</button>
                </div>
            </section>

            <!-- RIGHT PANEL: VISUALIZATION -->
            <section class="panel viz-panel">
                
                <!-- GANTT PLAYER -->
                <div class="viz-card">
                    <div class="viz-header">
                        <h3>Gantt Timeline</h3>
                        <div class="playback-controls">
                            <button id="btn-step-back" aria-label="Step Back">⏮</button>
                            <button id="btn-play-pause" aria-label="Play/Pause">▶</button>
                            <button id="btn-step-fwd" aria-label="Step Forward">⏭</button>
                            <div class="speed-control">
                                <span>Speed:</span>
                                <input type="range" id="speed-slider" min="1" max="4" step="1" value="3">
                                <span id="speed-label">1x</span>
                            </div>
                        </div>
                    </div>
                    
                    <div id="gantt-wrapper" class="gantt-wrapper custom-scrollbar">
                        <svg id="gantt-svg" width="100%" height="120"></svg>
                        <div id="time-cursor"></div>
                    </div>
                    <div class="time-display">Current Time: <span id="current-time">0</span></div>
                </div>

                <!-- BOTTOM GRID: DECISIONS & METRICS -->
                <div class="bottom-grid">
                    
                    <!-- DECISION LOG -->
                    <div class="viz-card decision-card">
                        <div class="viz-header">
                            <h3>Decision Log</h3>
                        </div>
                        <div id="decision-log" class="decision-content custom-scrollbar">
                            <div class="empty-state">Run simulation to see decisions.</div>
                        </div>
                    </div>

                    <!-- METRICS -->
                    <div class="viz-card metrics-card">
                        <h3>Metrics Summary</h3>
                        <div id="metrics-content">
                            <table class="metrics-table">
                                <thead>
                                    <tr>
                                        <th>PID</th>
                                        <th>Wait</th>
                                        <th>Turnaround</th>
                                        <th>Completion</th>
                                    </tr>
                                </thead>
                                <tbody id="metrics-body">
                                    <!-- Dynamic Rows -->
                                </tbody>
                            </table>
                            <div class="summary-stats">
                                <div class="stat-box">
                                    <span class="stat-label">Avg Wait</span>
                                    <span class="stat-val" id="avg-wait">-</span>
                                </div>
                                <div class="stat-box">
                                    <span class="stat-label">Avg Turn</span>
                                    <span class="stat-val" id="avg-turn">-</span>
                                </div>
                                <div class="stat-box">
                                    <span class="stat-label">Util %</span>
                                    <span class="stat-val" id="cpu-util">-</span>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </section>
        </main>
    </div>

    <!-- Tooltip Element -->
    <div id="tooltip" class="tooltip hidden"></div>

    <!-- Link to the JavaScript Logic -->
    <script src="app.js"></script>
</body>
</html>